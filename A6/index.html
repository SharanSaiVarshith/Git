<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pizza Builder üçï</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #fdf3f0; }
    .container { max-width: 420px; margin: auto; background: #fff; padding: 20px; border-radius: 12px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
    h2 { text-align: center; color: #ff5733; }
    .result { margin-top: 20px; padding: 15px; border: 1px solid #ccc; border-radius: 8px; background: #f9f9f9; }
    button { margin-top: 15px; padding: 12px; width: 100%; background: #ff5733; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 16px; }
    button:hover { background: #e64e2b; }

    /* Modal Styling */
    .modal {
      display: none; 
      position: fixed; 
      z-index: 999; 
      left: 0; top: 0;
      width: 100%; height: 100%; 
      background: rgba(0,0,0,0.6);
      display: flex; 
      align-items: center; 
      justify-content: center;
    }
    .modal-content {
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      width: 90%;
      max-width: 400px;
      text-align: center;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }
    .close-btn {
      margin-top: 15px;
      padding: 10px;
      background: #444;
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    .close-btn:hover { background: #222; }
  </style>
</head>
<body>
  <div class="container">
    <h2>üçï Build Your Pizza</h2>
    
    <label>Choose Size:</label>
    <select id="size">
      <option>Small</option>
      <option>Medium</option>
      <option>Large</option>
    </select><br><br>
    
    <label>Toppings:</label><br>
    <input type="checkbox" value="Cheese"> Cheese<br>
    <input type="checkbox" value="Pepperoni"> Pepperoni<br>
    <input type="checkbox" value="Mushrooms"> Mushrooms<br>
    <input type="checkbox" value="Olives"> Olives<br><br>
    
    <label>Add-ons:</label><br>
    <input type="checkbox" value="Extra Cheese"> Extra Cheese<br>
    <input type="checkbox" value="Drink"> Drink<br>
    <input type="checkbox" value="Sauce"> Sauce<br><br>
    
    <label>Delivery Preference:</label>
    <select id="delivery">
      <option>Home Delivery</option>
      <option>Takeaway</option>
    </select><br><br>
    
    <button onclick="finalizeOrder()">Finalize Order</button>
    
    <div class="result" id="result"></div>
  </div>

  <!-- Modal -->
  <div id="orderModal" class="modal">
    <div class="modal-content">
      <h3>‚úÖ Order Confirmed!</h3>
      <div id="orderSummary"></div>
      <button class="close-btn" onclick="closeModal()">Close</button>
    </div>
  </div>

  <script>
    // Prices
    const PRICES = {
      sizes: { Small: 150, Medium: 250, Large: 350 },
      topping: 50,
      addon: 40
    };

    // Product
    class Pizza {
      constructor(size, toppings, addons, delivery, price) {
        this.size = size;
        this.toppings = toppings;
        this.addons = addons;
        this.delivery = delivery;
        this.price = price;
      }

      details() {
        return `
          <strong>Pizza Order:</strong><br>
          Size: ${this.size} (‚Çπ${PRICES.sizes[this.size]})<br>
          Toppings: ${this.toppings.join(", ") || "None"} (${this.toppings.length} √ó ‚Çπ${PRICES.topping})<br>
          Add-ons: ${this.addons.join(", ") || "None"} (${this.addons.length} √ó ‚Çπ${PRICES.addon})<br>
          Delivery: ${this.delivery}<br><br>
          <strong>Total Price: ‚Çπ${this.price}</strong>
        `;
      }
    }

    // Builder
    class PizzaBuilder {
      constructor() {
        this.size = "Medium";
        this.toppings = [];
        this.addons = [];
        this.delivery = "Takeaway";
      }

      setSize(size) { this.size = size; return this; }
      addToppings(toppings) { this.toppings = toppings; return this; }
      addAddons(addons) { this.addons = addons; return this; }
      setDelivery(delivery) { this.delivery = delivery; return this; }

      calculatePrice() {
        let price = PRICES.sizes[this.size];
        price += this.toppings.length * PRICES.topping;
        price += this.addons.length * PRICES.addon;
        return price;
      }

      build() {
        const totalPrice = this.calculatePrice();
        return new Pizza(this.size, this.toppings, this.addons, this.delivery, totalPrice);
      }
    }

    // Build Pizza from form
    function buildPizza() {
      const size = document.getElementById("size").value;
      const toppings = Array.from(document.querySelectorAll('input[type="checkbox"]:checked'))
                            .filter(cb => ["Cheese","Pepperoni","Mushrooms","Olives"].includes(cb.value))
                            .map(cb => cb.value);
      const addons = Array.from(document.querySelectorAll('input[type="checkbox"]:checked'))
                          .filter(cb => ["Extra Cheese","Drink","Sauce"].includes(cb.value))
                          .map(cb => cb.value);
      const delivery = document.getElementById("delivery").value;

      return new PizzaBuilder()
        .setSize(size)
        .addToppings(toppings)
        .addAddons(addons)
        .setDelivery(delivery)
        .build();
    }

    // Live update
    function updateLivePrice() {
      const pizza = buildPizza();
      document.getElementById("result").innerHTML = pizza.details();
    }

    // Finalize Order -> Show Modal
    function finalizeOrder() {
      const pizza = buildPizza();
      document.getElementById("orderSummary").innerHTML = pizza.details();
      document.getElementById("orderModal").style.display = "flex";
    }

    // Close Modal
    function closeModal() {
      document.getElementById("orderModal").style.display = "none";
    }

    // Attach live update listeners
    document.querySelectorAll("select, input[type=checkbox]").forEach(el => {
      el.addEventListener("change", updateLivePrice);
    });

    // Initial update
    updateLivePrice();
  </script>
</body>
</html>
